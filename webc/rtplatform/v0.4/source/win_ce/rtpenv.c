 /*
 | RTPENV.C - Runtime Platform Environment Services
 |
 |   PORTED TO THE WIN32 PLATFORM
 |
 | EBSnet - RT-Platform 
 |
 |  $Author: tony $
 |  $Date: 2004/12/21 22:13:39 $
 |  $Name:  $
 |  $Revision: 1.1 $
 |
 | Copyright EBSnet Inc. , 2003
 | All rights reserved.
 | This code may not be redistributed in source or linkable object form
 | without the consent of its author.
 |
 | Module description:
 |  [tbd]
*/



/************************************************************************
* Headers
************************************************************************/
#include "rtp.h"
#include "rtpenv.h"

#include <stdlib.h>

/************************************************************************
* Defines
************************************************************************/

/************************************************************************
* Types
************************************************************************/

/************************************************************************
* Data
************************************************************************/

/************************************************************************
* Macros
************************************************************************/

/************************************************************************
* Function Prototypes
************************************************************************/

/************************************************************************
* Function Bodies
************************************************************************/

/*----------------------------------------------------------------------*
                                rtp_setenv
 *----------------------------------------------------------------------*/
int rtp_setenv (const char * envname, char * value)
{
char *envstring;
    
    if (!value)
    {
        /* ------------------------------ */
        /*  Remove environment variable.  */
        /* ------------------------------ */
        envstring = malloc(strlen(envname) + 1);
        sprintf(envstring, "%s=", envname);
        
    }
    else
    {
        /* ------------------------------ */
        /*  Set/Create environment var.   */
        /* ------------------------------ */
        envstring = malloc(strlen(envname) + strlen(value) + 1);
        sprintf(envstring, "%s=%s", envname, value);
    }
    
    if (_putenv(envstring) != 0)
    {
        return (-1);
    }
    return (0);
}


/*----------------------------------------------------------------------*
                                rtp_getenv
 *----------------------------------------------------------------------*/
int rtp_getenv (const char * envname, char ** value)
{
    if ((*value = getenv(envname)) == NULL)
    {
        return (-1);
    }
    return (0);
}



/* ----------------------------------- */
/*             END OF FILE             */
/* ----------------------------------- */
