 /*
 | RTPMEM.C - Runtime Platform Memory System Services
 |
 |   PORTED TO THE LINUX PLATFORM
 |
 | EBSnet - RT-Platform 
 |
 |  $Author: tony $
 |  $Date: 2005/01/25 17:11:59 $
 |  $Name:  $
 |  $Revision: 1.1 $
 |
 | Copyright EBSnet Inc. , 2003
 | All rights reserved.
 | This code may not be redistributed in source or linkable object form
 | without the consent of its author.
 |
 | Module description:
 |  [tbd]
*/



/************************************************************************
* Headers
************************************************************************/
#include "rtp.h"
#include "rtpmem.h"

#include <stdlib.h>
#include <RTOS.h>

/************************************************************************
* Defines
************************************************************************/

/************************************************************************
* Types
************************************************************************/

/************************************************************************
* Data
************************************************************************/

/************************************************************************
* Macros
************************************************************************/

/************************************************************************
* Function Prototypes
************************************************************************/

/************************************************************************
* Function Bodies
************************************************************************/

/*----------------------------------------------------------------------*
                              _rtp_malloc
 *----------------------------------------------------------------------*/
void * _rtp_malloc (unsigned long size)
{
  void *retVal;

  if (size >= 0x80000000)
	{
		return 0;
	}
    retVal = OS_malloc ((size_t) size);
  
 	if(!retVal)
	  exit(0);
 
  return retVal;
}


/*----------------------------------------------------------------------*
                             _rtp_calloc
 *----------------------------------------------------------------------*/
void * _rtp_calloc (unsigned long num, unsigned long size)
{
  void *retVal;
	if (size >= 0x80000000)
	{
		return 0;
	}
    //return (calloc ((size_t) num, (size_t) size));
    retVal = OS_malloc ((size_t) num * (size_t) size);
	if(retVal)
	  memset(retVal, 0, num * size);
	
	if(!retVal)
	  exit(0);
	
  return retVal;
}


/*----------------------------------------------------------------------*
                             _rtp_realloc
 *----------------------------------------------------------------------*/
void * _rtp_realloc (void * ptr, unsigned long size)
{
  void *retVal;

  if (size >= 0x80000000)
	{
		return 0;
	}
    retVal = OS_realloc (ptr, (size_t) size);
  
 	if(!retVal)
	  exit(0);
 
  return retVal;
}


/*----------------------------------------------------------------------*
                              _rtp_free
 *----------------------------------------------------------------------*/
void _rtp_free (void * ptr)
{
    OS_free (ptr);
}


/* ----------------------------------- */
/*             END OF FILE             */
/* ----------------------------------- */
